
 NAM MITS
*TO PATCH BASIC TO SWTP
*WITH ACIA AT PORT 1
*JAN 11 1978  MICHAEL HOLLEY
*REV 4   SEPT 4, 1978
*
*Updated to remove the MSB on OUTCH
*This removes a graphical glitch.

 ORG $A016
ACIACS EQU $8004
ACIADA EQU $8005

*POLE FOR CHARACTER
*SETS CARRY IF CHARACTER IS IN BUFFER
*CLOBBERS B REG
POLCAT LDA B ACIACS ACIA STATUS TO B
 ASR B ROTATE RDRF BIT INTO CARRY
 RTS RETURN

*INPUT ONE CHARACTER ACC B
INCH BSR POLCAT
 BCC INCH
 LDA B ACIADA GET CHAR
 RTS

*OUTCH OUTPUT CHARACTER ACC A
OUTCH BSR POLCAT
 ASR B
 BCC OUTCH
 AND A #%01111111
 STA A ACIADA OUTPUT
 RTS

*PATCHES TO MITS BASIC
 ORG $041F
 JSR INCH

 ORG $0618
 JSR POLCAT

 ORG $08AD
 JSR OUTCH

 END